<!DOCTYPE html>

<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="description" content="Let's move the block and let the light transmit!">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Transmit</title>

	<style>
		body {
			margin: 0;
			overflow: hidden;
			padding: 0;
		}

		#background {
			background-color: black;
			height: 100vh;
			width: 100vw;
		}

		#foreground {
			background-color: white;
		}

		@media (min-aspect-ratio: 1/1) {
			#foreground {
				position: absolute;
				top: 20vh;
				left: calc((100vw - 60vh) / 2);
				height: 60vh;
				width: 60vh;
			}
		}

		@media (max-aspect-ratio: 1/1) {
			#foreground {
				position: absolute;
				top: calc((100vh - 60vw) / 2);
				left: 20vw;
				height: 60vw;
				width: 60vw;
			}
		}
	</style>
</head>

<body>
	<canvas id="background"></canvas>
	<canvas id="foreground"></canvas>
	<script>
		var block = [];
		var color = ['aqua', 'black', 'blue', 'fuchsia', 'gray', 'green', 'lime', 'maroon', 'navy', 'olive', 'purple', 'red', 'silver', 'teal', 'yellow'];

		class Block {
			constructor(x, y, width, height) {
				this.x = x;
				this.y = y;
				this.height = height;
				this.width = width;
			}

			drow() {
				const foreground = document.getElementById('foreground').getContext('2d');
				const n = document.getElementById('foreground').width / 6;
				foreground.fillRect(this.x * n, this.y * n, this.width * n, this.height * n);
			}
		}

		function drow() {
			const foreCanvas = document.getElementById('foreground')
			const foreground = foreCanvas.getContext('2d');
			foreCanvas.width = foreCanvas.offsetWidth;
			foreCanvas.height = foreCanvas.offsetHeight;
			foreground.clearRect(0, 0, foreground.width, foreground.height);
			for(i = 0; i < block.length; i ++) {
				foreground.fillStyle = color[i];
				block[i].drow();
			}
		}

		function setBlock() {
			for(i = color.length - 1; i > 0; i --) {
				j = Math.random() * color.length | 0;
				temp = color[i];
				color[i] = color[j];
				color[j] = temp;
			}

			block[0] = new Block(0, 0, 1, 2);
			block[1] = new Block(1, 0, 2, 1);
			block[2] = new Block(3, 0, 3, 1);
			block[3] = new Block(2, 1, 2, 1);
			block[4] = new Block(4, 1, 1, 2);
			block[5] = new Block(2, 2, 2, 1);
			block[6] = new Block(0, 3, 2, 1);
			block[7] = new Block(3, 3, 2, 1);
			block[8] = new Block(5, 3, 1, 3);
			block[9] = new Block(1, 4, 2, 1);
			block[10] = new Block(3, 4, 1, 2);
			block[11] = new Block(0, 5, 3, 1);
		}

		window.addEventListener('load', () => {
			setBlock();
			drow();
		});

		window.addEventListener('resize', () => {
			drow();
		});
	</script>
</body>

</html>